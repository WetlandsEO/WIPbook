# Completely in R {.unnumbered}

```{r, echo=FALSE}
dem <- terra::rast("Data/PF_DTM3.tif")
load("fun.RData")
```

Now, we will go into the function that calculates the metrics internally, `surface_met`. This option is less complicated to get to work, but also comes with drawbacks. It will not only take longer to run, but also has slightly less accurate results.

This function can calculate any and all five of the types of metrics described above. The default is to calculate all five, but that can be changed with a different input of `elev_dev` .


### Parameters

| Inputs     | Description                                                                                                         |
|-------------|-----------------------------------------------------------|
| `DEM`      | As the name suggests, this input is the DEM/DTM                                                                     |
| `len`      | Number input represents the length at which the metric is calculated                                                |
| `elev_dev` | Vector input of selection of metrics. The choices are "grad", "prof", "plan", "dev", "twi"                          |
| `export`   | This is a binary (true/false) parameter that determines whether or not the function exports the output(s) to a file |

### Using the function

```{r, warning=FALSE}
elev1 <- surface_met(dem, len = 20, elev_dev = c("grad", "prof", "plan"))
elev2 <- surface_met(dem, len = 100, elev_dev = c("grad", "prof", "plan"))
elev3 <- surface_met(dem, len = 10, elev_dev = c("twi"))
```

A progress bar is printed below a few of the functions, in case you were wondering what those odd lines were. This is added so that the user can have some semblance of how much is left to run. Most of the functions within the entirety of the tool do something similar, as they will often take some time to run.
